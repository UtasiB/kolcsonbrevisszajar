<%- include('header') %>

<%- include('message') %>
<div class="p-3">
    <h3>Összes kölcsönzés</h3>
    <hr>
    <table class="table table-striped table-hovered"> 
        <thead>
            <tr>
                <th>Felhasználó ID-ja</th>
                <th>Cím</th>
                <th>Kölcsönzés kezdete</th>
                <th>Visszahozás dátuma</th>
                <th class="text-end">Müveletek</th>
            </tr>
        </thead>
        <tbody>
            <% rentals.forEach(function(rental) { %>
                <tr>
                    <td><%= rental.userID %></td>
                    <td><%= rental.title %></td>
                    <td><%= rental.rental_date %></td>
                    <td><%= rental.return_date %></td>
                    <input type="hidden" name="rentalID" value="<%= rental.ID %>">
                    <td class="text-end">
                        <form action="/loans/delete/<%= rental.ID  %>" method="POST" >
                            <button type="submit" class="btn btn-danger mb-3">Törlés</button>
                        </form>
                    <% if(rental.return_date == undefined){ %>
                        <form action="/loans/visszahozatal" method="post">
                            <td class="text-end"><input class="btn btn-primary mb-3" type="submit" value="Visszavétel"></td>   
                        </form>
                        <%  } else {%>
                            <td class="text-end"><input class="btn btn-primary mb-3" type="submit" value="Visszavétel" disabled></td>
                        <% }%>
                    </td>
                </tr>
            <% }); %>
        </tbody>
    </table>
</div>


<%- include('footer') %>